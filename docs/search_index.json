[["index.html", "Understanding Plasmode Simulation Chapter 1 Plasmode simulation", " Understanding Plasmode Simulation Ehsan Karim 2022-03-23 Chapter 1 Plasmode simulation Healthcare claims databases contain numerous (usually thousands) collected variables. Simulating such a high-dimensional dataset is problematic in a Monte Carlo study because it is difficult to recreate a realistic data generating process that takes into account of associations among a large number of covariates under consideration. Plasmode is a simulation technique that relies on resampling techniques to obtain data that can preserve the empirical associations among the covariates. During the process of plasmode simulation, the analyst can assign a desired value for the true treatment effect in the data generating process. Such a plasmode study begins with an existing cohort, with an assumed data generating process, as in the following equation, and we can modify the existing cohort and injected known effects (signals) into it. \\[\\begin{eqnarray}\\label{plasmodeequation} {logit\\big[Pr(Y = 1)\\big] = \\alpha_0 + \\theta \\times \\alpha_1 T + \\gamma \\times \\alpha_2 X,} \\end{eqnarray}\\] where \\(Y\\) is the outcome (e.g., all-cause mortality following an acute myocardial infarction), \\(T\\) is the treatment indicator (whether or not the patient being treated with statin), \\(X\\) is the high-dimensional covariate matrix that includes the important investigator-specified covariates (listed in eTable ), additional investigator-specified covariates (listed in eTable ) and the list of created empirical covariates obtained by running the hdPS algorithm on the complete statin user dataset with \\(32,792\\) patients. These empirical variables should act as proxy or surrogate of the unmeasured confounders. As for the parameters in equation, \\(\\alpha_0\\) is the intercept, \\(\\alpha_1\\) is the treatment effect, \\(\\alpha_2\\) is the vector of effects associated with covariates listed in \\(X\\), \\(\\theta\\) is the treatment effect multiplier and \\(\\gamma\\) is the covariate effect multiplier. The plasmode simulation algorithm samples exposed and unexposed subjects with replacement from the empirical dataset in such a way that guarantees a desired study size (\\(m\\)) and a prevalence of exposure (\\(p_E\\)) in the simulated plasmode samples (J. M. Franklin et al. 2014, 2015; Jessica M. Franklin et al. 2017). Also, this simulation algorithm allows researchers to specify the intercept value in the outcome-generating model to guarantee a desired prevalence of outcome (\\(p_Y\\)) (J. M. Franklin et al. 2014, 2015). Methodologically, the plasmode simulation realistically generates the data by controlling the relationship with outcome by retaining \\(\\alpha_2\\) estimates (parameter estimates associates with the covariates) in the outcome generation model same as the estimates obtained from the empirical data fitting. The plasmode simulation uses resampling techniques such as bootstrap to select patients in a specific sample with replacement. Here, the bootstrap samples (of specified size \\(m\\)) are collected from the complete set of covariate-exposure matrix \\(Z = (T,X)\\). As none of these variables in the covariate-exposure matrix, \\(Z\\) are permuted or modified in any way, in each bootstrap sample (of a reasonable size), systematically, the relationships should remain intact among exposure and covariates (J. M. Franklin et al. 2014). Therefore, relationship with covariates and outcomes are controlled by fixing \\(\\alpha_2\\) values in the outcome generation model and boostrap ensures joint distribution of exposure and covariates are unaltered, there should not be any obvious reason why the relationship among covariates and exposure should be different in plasmode samples. In that sense, in the plasmode simulation, the `amount of confounding from a covariate (i.e., relationship of a covariate with the outcome as well as the exposure; both of which relationships are required for a covariate to be considered as a confounder) is controlled (J. M. Franklin et al. 2014). However, among other things, this simulation mechanism do allow researchers to change the multipliers of the treatment effect and the covariate effects by changing \\(\\theta\\) parameter value and \\(\\gamma\\) parameter vector respectively. In certain combination of these parameters values, it is possible that an important confounder in the empirical study may not remain important in the plasmode samples. Future research should investigate further in this issue. Plasmode simulations are built based on a given empirical data setting, and the generalizability of the results is an issue for such simulations. See Karim, Pang, and Platt (2018) as an exmple of the use of plasmode simulation. References "],["data-load.html", "Chapter 2 Data load", " Chapter 2 Data load require(plyr) require(stringr) require(mgcv) require(knitr) We are using RHC data (Connors et al. 1996) as an example. load(&quot;data/rhcX.RData&quot;) kable(head(rhc)) death swang1 age sex race edu income ninsclas cat1 das2d3pc dnr1 ca surv2md1 aps1 scoma1 wtkilo1 temp1 meanbp1 resp1 hrt1 pafi1 paco21 ph1 wblc1 hema1 sod1 pot1 crea1 bili1 alb1 resp card neuro gastr renal meta hema seps trauma ortho cardiohx chfhx dementhx psychhx chrpulhx renalhx liverhx gibledhx malighx immunhx transhx amihx id 0 0 70.25098 Male white 12.000000 Under $11k Medicare COPD 23.50000 No Yes 0.6409912 46 0 64.69995 38.69531 41 10 124 68.0000 40 7.359375 22.0976562 58.00000 145 4.000000 1.1999512 1.0097656 3.500000 Yes Yes No No No No No No No No 0 0 0 0 1 0 0 0 1 0 0 0 1 1 1 78.17896 Female white 12.000000 Under $11k Private &amp; Medicare MOSF w/Sepsis 14.75195 No No 0.7549996 50 0 45.69998 38.89844 63 38 137 218.3125 34 7.329102 28.8984375 32.50000 137 3.299805 0.5999756 0.6999512 2.599609 No No No No No No No Yes No No 1 1 0 0 0 0 0 0 0 1 1 0 2 0 1 46.09198 Female white 14.069916 $25-$50k Private MOSF w/Malignancy 18.13672 No Yes 0.3169999 82 0 0.00000 36.39844 57 40 130 275.5000 16 7.359375 0.0499954 21.09766 146 2.899902 2.5996094 1.0097656 3.500000 No Yes No No No No No No No No 0 0 0 0 0 0 0 0 1 1 0 0 3 1 0 75.33197 Female white 9.000000 $11-$25k Private &amp; Medicare ARF 22.92969 No No 0.4409790 48 0 54.59998 35.79688 55 26 58 156.6562 30 7.459961 23.2968750 26.29688 117 5.799805 1.6999512 0.3999634 3.500000 Yes No No No No No No No No No 0 0 0 0 0 0 0 0 0 1 0 0 4 1 1 67.90997 Male white 9.945259 Under $11k Medicare MOSF w/Sepsis 21.05078 Yes No 0.4369998 72 41 78.39996 34.79688 65 27 125 478.0000 17 7.229492 29.6992188 24.00000 126 5.799805 3.5996094 1.0097656 3.500000 No Yes No No No No No No No No 0 0 0 0 0 0 0 0 0 0 0 0 5 0 0 86.07794 Female white 8.000000 Under $11k Medicare COPD 17.50000 No No 0.6650000 38 0 54.89999 39.19531 115 36 134 184.1875 68 7.299805 18.0000000 30.50000 138 5.399414 1.3999023 1.0097656 3.099609 Yes No No No No No No No No No 0 1 0 0 1 0 0 0 0 0 0 0 6 ls() ## [1] &quot;Er&quot; &quot;exposure&quot; &quot;Oformula&quot; &quot;outcome&quot; &quot;rhc&quot; &quot;RHScov&quot; &quot;vars&quot; &quot;Yr&quot; set.seed(1) We will use this data to show how to implement a plasmode simulation (J. M. Franklin et al. 2014) in a binary exposure / outcome data References "],["user-written-function.html", "Chapter 3 User-written Function", " Chapter 3 User-written Function See J. M. Franklin et al. (2015). All necessary files (e.g., PlasmodeSim.R) are in the github repo. # Plasmode simulation source(&quot;functions/PlasmodeSim.R&quot;) nSim &lt;- 100 simdata &lt;- PlasmodeBinSim(x = rhc, idVar = &quot;id&quot;, outcomeVar = &quot;death&quot;, treatVar = &quot;swang1&quot;, treatLabel = &quot;&quot;, form = paste0(vars, collapse = &quot;+&quot;), effectOR = 3, MM = 1, nsim = nSim, size = 3000, eventRate = 0.65, exposedPrev = 0.38) ## Setup complete. Calling fit ## Deviance = 3299.71337102193 Iterations - 1 ## Deviance = 6096.41310065475 Iterations - 2 ## Deviance = 6052.40572812184 Iterations - 3 ## Deviance = 6051.24990537168 Iterations - 4 ## Deviance = 6051.24785516408 Iterations - 5 ## Deviance = 6051.24785515008 Iterations - 6 ## Fit complete. Finishing gam object. ## user.self sys.self elapsed ## initial 0.04 0 0.05 ## gam.setup 0.02 0 0.01 ## pre-fit 0.00 0 0.00 ## fit 0.42 0 0.43 ## finalise 0.02 0 0.01 ## simulation ID created for iteration 1 ## simulation ID created for iteration 2 ## simulation ID created for iteration 3 ## simulation ID created for iteration 4 ## simulation ID created for iteration 5 ## simulation ID created for iteration 6 ## simulation ID created for iteration 7 ## simulation ID created for iteration 8 ## simulation ID created for iteration 9 ## simulation ID created for iteration 10 ## simulation ID created for iteration 11 ## simulation ID created for iteration 12 ## simulation ID created for iteration 13 ## simulation ID created for iteration 14 ## simulation ID created for iteration 15 ## simulation ID created for iteration 16 ## simulation ID created for iteration 17 ## simulation ID created for iteration 18 ## simulation ID created for iteration 19 ## simulation ID created for iteration 20 ## simulation ID created for iteration 21 ## simulation ID created for iteration 22 ## simulation ID created for iteration 23 ## simulation ID created for iteration 24 ## simulation ID created for iteration 25 ## simulation ID created for iteration 26 ## simulation ID created for iteration 27 ## simulation ID created for iteration 28 ## simulation ID created for iteration 29 ## simulation ID created for iteration 30 ## simulation ID created for iteration 31 ## simulation ID created for iteration 32 ## simulation ID created for iteration 33 ## simulation ID created for iteration 34 ## simulation ID created for iteration 35 ## simulation ID created for iteration 36 ## simulation ID created for iteration 37 ## simulation ID created for iteration 38 ## simulation ID created for iteration 39 ## simulation ID created for iteration 40 ## simulation ID created for iteration 41 ## simulation ID created for iteration 42 ## simulation ID created for iteration 43 ## simulation ID created for iteration 44 ## simulation ID created for iteration 45 ## simulation ID created for iteration 46 ## simulation ID created for iteration 47 ## simulation ID created for iteration 48 ## simulation ID created for iteration 49 ## simulation ID created for iteration 50 ## simulation ID created for iteration 51 ## simulation ID created for iteration 52 ## simulation ID created for iteration 53 ## simulation ID created for iteration 54 ## simulation ID created for iteration 55 ## simulation ID created for iteration 56 ## simulation ID created for iteration 57 ## simulation ID created for iteration 58 ## simulation ID created for iteration 59 ## simulation ID created for iteration 60 ## simulation ID created for iteration 61 ## simulation ID created for iteration 62 ## simulation ID created for iteration 63 ## simulation ID created for iteration 64 ## simulation ID created for iteration 65 ## simulation ID created for iteration 66 ## simulation ID created for iteration 67 ## simulation ID created for iteration 68 ## simulation ID created for iteration 69 ## simulation ID created for iteration 70 ## simulation ID created for iteration 71 ## simulation ID created for iteration 72 ## simulation ID created for iteration 73 ## simulation ID created for iteration 74 ## simulation ID created for iteration 75 ## simulation ID created for iteration 76 ## simulation ID created for iteration 77 ## simulation ID created for iteration 78 ## simulation ID created for iteration 79 ## simulation ID created for iteration 80 ## simulation ID created for iteration 81 ## simulation ID created for iteration 82 ## simulation ID created for iteration 83 ## simulation ID created for iteration 84 ## simulation ID created for iteration 85 ## simulation ID created for iteration 86 ## simulation ID created for iteration 87 ## simulation ID created for iteration 88 ## simulation ID created for iteration 89 ## simulation ID created for iteration 90 ## simulation ID created for iteration 91 ## simulation ID created for iteration 92 ## simulation ID created for iteration 93 ## simulation ID created for iteration 94 ## simulation ID created for iteration 95 ## simulation ID created for iteration 96 ## simulation ID created for iteration 97 ## simulation ID created for iteration 98 ## simulation ID created for iteration 99 ## simulation ID created for iteration 100 saveOR &lt;- NULL for (i in 1:nSim){ plasmodeData.i &lt;- join(data.frame(id=simdata[,i], EVENT=simdata[,i+nSim]), rhc, by=&quot;id&quot;, type=&quot;left&quot;) estORx &lt;- tryCatch(exp(summary(glm(as.formula(paste0(&quot;EVENT&quot;, &quot;~&quot;, exposure, &quot;+&quot;, paste(vars, collapse = &quot;+&quot;))), family=binomial(link=&quot;logit&quot;), data=plasmodeData.i))$coef[exposure,&quot;Estimate&quot;]), error = function(e) { NA } ) saveOR &lt;- c(estORx,saveOR) cat(&quot;iteration&quot;, i, &quot;event rate =&quot;, round(table(plasmodeData.i$EVENT)[2]/length(plasmodeData.i$EVENT),2), &quot;exposure prevalence =&quot;, round(table(plasmodeData.i$swang1)[2]/length(plasmodeData.i$swang1),2), &quot;OR =&quot;, round(estORx,2), &quot;cumulative mean OR=&quot;, round(mean(saveOR, na.rm = TRUE),2),&quot;\\n&quot;) } ## iteration 1 event rate = 0.65 exposure prevalence = 0.38 OR = 2.85 cumulative mean OR= 2.85 ## iteration 2 event rate = 0.64 exposure prevalence = 0.38 OR = 3.37 cumulative mean OR= 3.11 ## iteration 3 event rate = 0.63 exposure prevalence = 0.38 OR = 3.56 cumulative mean OR= 3.26 ## iteration 4 event rate = 0.65 exposure prevalence = 0.38 OR = 3.49 cumulative mean OR= 3.32 ## iteration 5 event rate = 0.65 exposure prevalence = 0.38 OR = 3.62 cumulative mean OR= 3.38 ## iteration 6 event rate = 0.65 exposure prevalence = 0.38 OR = 3.13 cumulative mean OR= 3.34 ## iteration 7 event rate = 0.64 exposure prevalence = 0.38 OR = 2.34 cumulative mean OR= 3.2 ## iteration 8 event rate = 0.64 exposure prevalence = 0.38 OR = 3.09 cumulative mean OR= 3.18 ## iteration 9 event rate = 0.65 exposure prevalence = 0.38 OR = 3.06 cumulative mean OR= 3.17 ## iteration 10 event rate = 0.65 exposure prevalence = 0.38 OR = 3.24 cumulative mean OR= 3.18 ## iteration 11 event rate = 0.66 exposure prevalence = 0.38 OR = 3.73 cumulative mean OR= 3.23 ## iteration 12 event rate = 0.65 exposure prevalence = 0.38 OR = 2.92 cumulative mean OR= 3.2 ## iteration 13 event rate = 0.65 exposure prevalence = 0.38 OR = 3.04 cumulative mean OR= 3.19 ## iteration 14 event rate = 0.66 exposure prevalence = 0.38 OR = 2.8 cumulative mean OR= 3.16 ## iteration 15 event rate = 0.65 exposure prevalence = 0.38 OR = 3.03 cumulative mean OR= 3.15 ## iteration 16 event rate = 0.64 exposure prevalence = 0.38 OR = 3.49 cumulative mean OR= 3.17 ## iteration 17 event rate = 0.65 exposure prevalence = 0.38 OR = 3.63 cumulative mean OR= 3.2 ## iteration 18 event rate = 0.65 exposure prevalence = 0.38 OR = 3.21 cumulative mean OR= 3.2 ## iteration 19 event rate = 0.64 exposure prevalence = 0.38 OR = 2.96 cumulative mean OR= 3.19 ## iteration 20 event rate = 0.65 exposure prevalence = 0.38 OR = 3.01 cumulative mean OR= 3.18 ## iteration 21 event rate = 0.66 exposure prevalence = 0.38 OR = 3.23 cumulative mean OR= 3.18 ## iteration 22 event rate = 0.65 exposure prevalence = 0.38 OR = 3.23 cumulative mean OR= 3.18 ## iteration 23 event rate = 0.65 exposure prevalence = 0.38 OR = 3.33 cumulative mean OR= 3.19 ## iteration 24 event rate = 0.67 exposure prevalence = 0.38 OR = 3.09 cumulative mean OR= 3.19 ## iteration 25 event rate = 0.65 exposure prevalence = 0.38 OR = 3.02 cumulative mean OR= 3.18 ## iteration 26 event rate = 0.64 exposure prevalence = 0.38 OR = 2.53 cumulative mean OR= 3.15 ## iteration 27 event rate = 0.64 exposure prevalence = 0.38 OR = 2.9 cumulative mean OR= 3.14 ## iteration 28 event rate = 0.66 exposure prevalence = 0.38 OR = 3.1 cumulative mean OR= 3.14 ## iteration 29 event rate = 0.63 exposure prevalence = 0.38 OR = 2.81 cumulative mean OR= 3.13 ## iteration 30 event rate = 0.64 exposure prevalence = 0.38 OR = 2.9 cumulative mean OR= 3.12 ## iteration 31 event rate = 0.65 exposure prevalence = 0.38 OR = 2.55 cumulative mean OR= 3.11 ## iteration 32 event rate = 0.65 exposure prevalence = 0.38 OR = 2.74 cumulative mean OR= 3.09 ## iteration 33 event rate = 0.66 exposure prevalence = 0.38 OR = 3.52 cumulative mean OR= 3.11 ## iteration 34 event rate = 0.66 exposure prevalence = 0.38 OR = 3.34 cumulative mean OR= 3.11 ## iteration 35 event rate = 0.66 exposure prevalence = 0.38 OR = 2.98 cumulative mean OR= 3.11 ## iteration 36 event rate = 0.65 exposure prevalence = 0.38 OR = 2.9 cumulative mean OR= 3.1 ## iteration 37 event rate = 0.65 exposure prevalence = 0.38 OR = 3.01 cumulative mean OR= 3.1 ## iteration 38 event rate = 0.65 exposure prevalence = 0.38 OR = 2.6 cumulative mean OR= 3.09 ## iteration 39 event rate = 0.64 exposure prevalence = 0.38 OR = 2.98 cumulative mean OR= 3.09 ## iteration 40 event rate = 0.66 exposure prevalence = 0.38 OR = 2.92 cumulative mean OR= 3.08 ## iteration 41 event rate = 0.64 exposure prevalence = 0.38 OR = 3.54 cumulative mean OR= 3.09 ## iteration 42 event rate = 0.66 exposure prevalence = 0.38 OR = 3.46 cumulative mean OR= 3.1 ## iteration 43 event rate = 0.65 exposure prevalence = 0.38 OR = 2.91 cumulative mean OR= 3.1 ## iteration 44 event rate = 0.66 exposure prevalence = 0.38 OR = 3.81 cumulative mean OR= 3.11 ## iteration 45 event rate = 0.65 exposure prevalence = 0.38 OR = 2.89 cumulative mean OR= 3.11 ## iteration 46 event rate = 0.65 exposure prevalence = 0.38 OR = 3.02 cumulative mean OR= 3.11 ## iteration 47 event rate = 0.66 exposure prevalence = 0.38 OR = 2.48 cumulative mean OR= 3.09 ## iteration 48 event rate = 0.64 exposure prevalence = 0.38 OR = 2.58 cumulative mean OR= 3.08 ## iteration 49 event rate = 0.65 exposure prevalence = 0.38 OR = 2.95 cumulative mean OR= 3.08 ## iteration 50 event rate = 0.64 exposure prevalence = 0.38 OR = 3.46 cumulative mean OR= 3.09 ## iteration 51 event rate = 0.64 exposure prevalence = 0.38 OR = 3.02 cumulative mean OR= 3.09 ## iteration 52 event rate = 0.65 exposure prevalence = 0.38 OR = 2.95 cumulative mean OR= 3.08 ## iteration 53 event rate = 0.66 exposure prevalence = 0.38 OR = 3.08 cumulative mean OR= 3.08 ## iteration 54 event rate = 0.66 exposure prevalence = 0.38 OR = 2.72 cumulative mean OR= 3.08 ## iteration 55 event rate = 0.66 exposure prevalence = 0.38 OR = 2.79 cumulative mean OR= 3.07 ## iteration 56 event rate = 0.66 exposure prevalence = 0.38 OR = 3.55 cumulative mean OR= 3.08 ## iteration 57 event rate = 0.65 exposure prevalence = 0.38 OR = 2.99 cumulative mean OR= 3.08 ## iteration 58 event rate = 0.65 exposure prevalence = 0.38 OR = 2.74 cumulative mean OR= 3.07 ## iteration 59 event rate = 0.65 exposure prevalence = 0.38 OR = 3.19 cumulative mean OR= 3.07 ## iteration 60 event rate = 0.66 exposure prevalence = 0.38 OR = 3.48 cumulative mean OR= 3.08 ## iteration 61 event rate = 0.64 exposure prevalence = 0.38 OR = 3.07 cumulative mean OR= 3.08 ## iteration 62 event rate = 0.65 exposure prevalence = 0.38 OR = 2.54 cumulative mean OR= 3.07 ## iteration 63 event rate = 0.64 exposure prevalence = 0.38 OR = 3.11 cumulative mean OR= 3.07 ## iteration 64 event rate = 0.64 exposure prevalence = 0.38 OR = 3.35 cumulative mean OR= 3.08 ## iteration 65 event rate = 0.64 exposure prevalence = 0.38 OR = 3.13 cumulative mean OR= 3.08 ## iteration 66 event rate = 0.64 exposure prevalence = 0.38 OR = 2.9 cumulative mean OR= 3.08 ## iteration 67 event rate = 0.65 exposure prevalence = 0.38 OR = 3.08 cumulative mean OR= 3.08 ## iteration 68 event rate = 0.65 exposure prevalence = 0.38 OR = 3.36 cumulative mean OR= 3.08 ## iteration 69 event rate = 0.65 exposure prevalence = 0.38 OR = 3.4 cumulative mean OR= 3.08 ## iteration 70 event rate = 0.65 exposure prevalence = 0.38 OR = 3.26 cumulative mean OR= 3.09 ## iteration 71 event rate = 0.65 exposure prevalence = 0.38 OR = 3.43 cumulative mean OR= 3.09 ## iteration 72 event rate = 0.65 exposure prevalence = 0.38 OR = 2.86 cumulative mean OR= 3.09 ## iteration 73 event rate = 0.65 exposure prevalence = 0.38 OR = 3.1 cumulative mean OR= 3.09 ## iteration 74 event rate = 0.64 exposure prevalence = 0.38 OR = 2.77 cumulative mean OR= 3.08 ## iteration 75 event rate = 0.65 exposure prevalence = 0.38 OR = NA cumulative mean OR= 3.08 ## iteration 76 event rate = 0.64 exposure prevalence = 0.38 OR = 2.76 cumulative mean OR= 3.08 ## iteration 77 event rate = 0.65 exposure prevalence = 0.38 OR = 2.57 cumulative mean OR= 3.07 ## iteration 78 event rate = 0.65 exposure prevalence = 0.38 OR = 3.76 cumulative mean OR= 3.08 ## iteration 79 event rate = 0.65 exposure prevalence = 0.38 OR = 3.96 cumulative mean OR= 3.09 ## iteration 80 event rate = 0.66 exposure prevalence = 0.38 OR = 3.14 cumulative mean OR= 3.09 ## iteration 81 event rate = 0.66 exposure prevalence = 0.38 OR = 2.42 cumulative mean OR= 3.09 ## iteration 82 event rate = 0.65 exposure prevalence = 0.38 OR = 3.13 cumulative mean OR= 3.09 ## iteration 83 event rate = 0.67 exposure prevalence = 0.38 OR = 2.93 cumulative mean OR= 3.08 ## iteration 84 event rate = 0.66 exposure prevalence = 0.38 OR = 3.27 cumulative mean OR= 3.09 ## iteration 85 event rate = 0.64 exposure prevalence = 0.38 OR = 2.93 cumulative mean OR= 3.08 ## iteration 86 event rate = 0.66 exposure prevalence = 0.38 OR = 3.05 cumulative mean OR= 3.08 ## iteration 87 event rate = 0.66 exposure prevalence = 0.38 OR = 2.98 cumulative mean OR= 3.08 ## iteration 88 event rate = 0.64 exposure prevalence = 0.38 OR = 2.22 cumulative mean OR= 3.07 ## iteration 89 event rate = 0.65 exposure prevalence = 0.38 OR = 3.3 cumulative mean OR= 3.08 ## iteration 90 event rate = 0.66 exposure prevalence = 0.38 OR = 2.97 cumulative mean OR= 3.07 ## iteration 91 event rate = 0.66 exposure prevalence = 0.38 OR = 3.52 cumulative mean OR= 3.08 ## iteration 92 event rate = 0.64 exposure prevalence = 0.38 OR = 3.69 cumulative mean OR= 3.09 ## iteration 93 event rate = 0.66 exposure prevalence = 0.38 OR = 2.98 cumulative mean OR= 3.09 ## iteration 94 event rate = 0.65 exposure prevalence = 0.38 OR = 2.76 cumulative mean OR= 3.08 ## iteration 95 event rate = 0.66 exposure prevalence = 0.38 OR = 3 cumulative mean OR= 3.08 ## iteration 96 event rate = 0.64 exposure prevalence = 0.38 OR = 3.51 cumulative mean OR= 3.09 ## iteration 97 event rate = 0.64 exposure prevalence = 0.38 OR = 3.78 cumulative mean OR= 3.09 ## iteration 98 event rate = 0.65 exposure prevalence = 0.38 OR = 3.04 cumulative mean OR= 3.09 ## iteration 99 event rate = 0.67 exposure prevalence = 0.38 OR = 3.05 cumulative mean OR= 3.09 ## iteration 100 event rate = 0.65 exposure prevalence = 0.38 OR = 3.12 cumulative mean OR= 3.09 summary(saveOR) ## Min. 1st Qu. Median Mean 3rd Qu. Max. NA&#39;s ## 2.223 2.902 3.049 3.092 3.336 3.957 1 hist(saveOR) rm(simdata) References "],["package.html", "Chapter 4 Package", " Chapter 4 Package Using the plasmode package. See more details here. # install.packages(c(&#39;glm2&#39;, &#39;arm&#39;, &#39;lme4&#39;, &#39;epiDisplay&#39;)) # install.packages( # &quot;https://cran.r-project.org/src/contrib/Archive/Plasmode/Plasmode_0.1.0.tar.gz&quot;, # repos = NULL, type = &quot;source&quot; # ) require(Plasmode) ## Loading required package: Plasmode nSim &lt;- 100 formulaOut &lt;- as.formula(paste0(&quot;death ~ swang1 +&quot;, paste(vars, collapse = &quot;+&quot;))) #fity &lt;- glm(paste0(&quot;death ~ swang1 +&quot;, paste(vars, # collapse = &quot;+&quot;)), family = binomial, data = rhc) simdata.obj &lt;- PlasmodeBin(formulaOut, #objectOut=fity, data=rhc, idVar=&quot;id&quot;, effectOR =3, nsim=nSim, size=3000, eventRate=0.65, exposedPrev=0.38) ## Deviance = 6096.413 Iterations - 1 ## Deviance = 6052.406 Iterations - 2 ## Deviance = 6051.25 Iterations - 3 ## Deviance = 6051.248 Iterations - 4 ## Deviance = 6051.248 Iterations - 5 simdata &lt;- simdata.obj$Sim_Data saveOR &lt;- NULL for (i in 1:nSim){ plasmodeData.i &lt;- join(data.frame(id=simdata[,i], EVENT=simdata[,i+nSim]), rhc, by=&quot;id&quot;, type=&quot;left&quot;) estORx &lt;- tryCatch(exp(summary(glm(as.formula(paste0(&quot;EVENT&quot;, &quot;~&quot;, exposure, &quot;+&quot;, paste(vars, collapse = &quot;+&quot;))), family=binomial(link=&quot;logit&quot;), data=plasmodeData.i))$coef[exposure,&quot;Estimate&quot;]), error = function(e) { NA } ) saveOR &lt;- c(estORx,saveOR) cat(&quot;iteration&quot;, i, &quot;event rate =&quot;, round(table(plasmodeData.i$EVENT)[2]/length(plasmodeData.i$EVENT),2), &quot;exposure prevalence =&quot;, round(table(plasmodeData.i$swang1)[2]/length(plasmodeData.i$swang1),2), &quot;OR =&quot;, round(estORx,2), &quot;cumulative mean OR=&quot;, round(mean(saveOR, na.rm = TRUE),2),&quot;\\n&quot;) } ## iteration 1 event rate = 0.65 exposure prevalence = 0.38 OR = 3.21 cumulative mean OR= 3.21 ## iteration 2 event rate = 0.65 exposure prevalence = 0.38 OR = 3.08 cumulative mean OR= 3.14 ## iteration 3 event rate = 0.66 exposure prevalence = 0.38 OR = 3.59 cumulative mean OR= 3.29 ## iteration 4 event rate = 0.64 exposure prevalence = 0.38 OR = 3.43 cumulative mean OR= 3.33 ## iteration 5 event rate = 0.64 exposure prevalence = 0.38 OR = 3.02 cumulative mean OR= 3.26 ## iteration 6 event rate = 0.65 exposure prevalence = 0.38 OR = 2.79 cumulative mean OR= 3.19 ## iteration 7 event rate = 0.65 exposure prevalence = 0.38 OR = 2.95 cumulative mean OR= 3.15 ## iteration 8 event rate = 0.64 exposure prevalence = 0.38 OR = 2.53 cumulative mean OR= 3.07 ## iteration 9 event rate = 0.66 exposure prevalence = 0.38 OR = 3.17 cumulative mean OR= 3.09 ## iteration 10 event rate = 0.64 exposure prevalence = 0.38 OR = 2.83 cumulative mean OR= 3.06 ## iteration 11 event rate = 0.66 exposure prevalence = 0.38 OR = 3.33 cumulative mean OR= 3.08 ## iteration 12 event rate = 0.65 exposure prevalence = 0.38 OR = 2.57 cumulative mean OR= 3.04 ## iteration 13 event rate = 0.65 exposure prevalence = 0.38 OR = 3.42 cumulative mean OR= 3.07 ## iteration 14 event rate = 0.64 exposure prevalence = 0.38 OR = 3 cumulative mean OR= 3.07 ## iteration 15 event rate = 0.64 exposure prevalence = 0.38 OR = 2.74 cumulative mean OR= 3.04 ## iteration 16 event rate = 0.65 exposure prevalence = 0.38 OR = 2.9 cumulative mean OR= 3.03 ## iteration 17 event rate = 0.65 exposure prevalence = 0.38 OR = 3.16 cumulative mean OR= 3.04 ## iteration 18 event rate = 0.64 exposure prevalence = 0.38 OR = 3.04 cumulative mean OR= 3.04 ## iteration 19 event rate = 0.65 exposure prevalence = 0.38 OR = 3.34 cumulative mean OR= 3.06 ## iteration 20 event rate = 0.67 exposure prevalence = 0.38 OR = 3.03 cumulative mean OR= 3.06 ## iteration 21 event rate = 0.64 exposure prevalence = 0.38 OR = 3.12 cumulative mean OR= 3.06 ## iteration 22 event rate = 0.66 exposure prevalence = 0.38 OR = 2.9 cumulative mean OR= 3.05 ## iteration 23 event rate = 0.64 exposure prevalence = 0.38 OR = 3.69 cumulative mean OR= 3.08 ## iteration 24 event rate = 0.65 exposure prevalence = 0.38 OR = 2.81 cumulative mean OR= 3.07 ## iteration 25 event rate = 0.64 exposure prevalence = 0.38 OR = 3.14 cumulative mean OR= 3.07 ## iteration 26 event rate = 0.64 exposure prevalence = 0.38 OR = 3.28 cumulative mean OR= 3.08 ## iteration 27 event rate = 0.67 exposure prevalence = 0.38 OR = 3.12 cumulative mean OR= 3.08 ## iteration 28 event rate = 0.65 exposure prevalence = 0.38 OR = NA cumulative mean OR= 3.08 ## iteration 29 event rate = 0.66 exposure prevalence = 0.38 OR = 3.4 cumulative mean OR= 3.09 ## iteration 30 event rate = 0.65 exposure prevalence = 0.38 OR = 3.17 cumulative mean OR= 3.1 ## iteration 31 event rate = 0.64 exposure prevalence = 0.38 OR = 3.12 cumulative mean OR= 3.1 ## iteration 32 event rate = 0.65 exposure prevalence = 0.38 OR = 2.78 cumulative mean OR= 3.09 ## iteration 33 event rate = 0.65 exposure prevalence = 0.38 OR = 2.94 cumulative mean OR= 3.08 ## iteration 34 event rate = 0.66 exposure prevalence = 0.38 OR = 3.4 cumulative mean OR= 3.09 ## iteration 35 event rate = 0.65 exposure prevalence = 0.38 OR = 2.97 cumulative mean OR= 3.09 ## iteration 36 event rate = 0.65 exposure prevalence = 0.38 OR = 2.95 cumulative mean OR= 3.08 ## iteration 37 event rate = 0.65 exposure prevalence = 0.38 OR = 2.94 cumulative mean OR= 3.08 ## iteration 38 event rate = 0.64 exposure prevalence = 0.38 OR = 3.14 cumulative mean OR= 3.08 ## iteration 39 event rate = 0.66 exposure prevalence = 0.38 OR = 3.06 cumulative mean OR= 3.08 ## iteration 40 event rate = 0.65 exposure prevalence = 0.38 OR = 2.8 cumulative mean OR= 3.07 ## iteration 41 event rate = 0.64 exposure prevalence = 0.38 OR = 4.05 cumulative mean OR= 3.1 ## iteration 42 event rate = 0.65 exposure prevalence = 0.38 OR = 2.9 cumulative mean OR= 3.09 ## iteration 43 event rate = 0.64 exposure prevalence = 0.38 OR = 3.24 cumulative mean OR= 3.1 ## iteration 44 event rate = 0.66 exposure prevalence = 0.38 OR = 2.67 cumulative mean OR= 3.09 ## iteration 45 event rate = 0.65 exposure prevalence = 0.38 OR = 3.06 cumulative mean OR= 3.09 ## iteration 46 event rate = 0.64 exposure prevalence = 0.38 OR = 2.97 cumulative mean OR= 3.08 ## iteration 47 event rate = 0.66 exposure prevalence = 0.38 OR = 2.96 cumulative mean OR= 3.08 ## iteration 48 event rate = 0.65 exposure prevalence = 0.38 OR = 3.23 cumulative mean OR= 3.08 ## iteration 49 event rate = 0.64 exposure prevalence = 0.38 OR = 2.87 cumulative mean OR= 3.08 ## iteration 50 event rate = 0.65 exposure prevalence = 0.38 OR = 3.09 cumulative mean OR= 3.08 ## iteration 51 event rate = 0.66 exposure prevalence = 0.38 OR = 3.3 cumulative mean OR= 3.08 ## iteration 52 event rate = 0.64 exposure prevalence = 0.38 OR = 3.01 cumulative mean OR= 3.08 ## iteration 53 event rate = 0.66 exposure prevalence = 0.38 OR = NA cumulative mean OR= 3.08 ## iteration 54 event rate = 0.64 exposure prevalence = 0.38 OR = 3.28 cumulative mean OR= 3.09 ## iteration 55 event rate = 0.65 exposure prevalence = 0.38 OR = 3.12 cumulative mean OR= 3.09 ## iteration 56 event rate = 0.65 exposure prevalence = 0.38 OR = 2.72 cumulative mean OR= 3.08 ## iteration 57 event rate = 0.66 exposure prevalence = 0.38 OR = 3.17 cumulative mean OR= 3.08 ## iteration 58 event rate = 0.65 exposure prevalence = 0.38 OR = 2.78 cumulative mean OR= 3.08 ## iteration 59 event rate = 0.65 exposure prevalence = 0.38 OR = 2.92 cumulative mean OR= 3.07 ## iteration 60 event rate = 0.66 exposure prevalence = 0.38 OR = 3.12 cumulative mean OR= 3.08 ## iteration 61 event rate = 0.65 exposure prevalence = 0.38 OR = 3.01 cumulative mean OR= 3.07 ## iteration 62 event rate = 0.64 exposure prevalence = 0.38 OR = 3.24 cumulative mean OR= 3.08 ## iteration 63 event rate = 0.66 exposure prevalence = 0.38 OR = 3.56 cumulative mean OR= 3.08 ## iteration 64 event rate = 0.68 exposure prevalence = 0.38 OR = 2.66 cumulative mean OR= 3.08 ## iteration 65 event rate = 0.66 exposure prevalence = 0.38 OR = 2.76 cumulative mean OR= 3.07 ## iteration 66 event rate = 0.65 exposure prevalence = 0.38 OR = 3.44 cumulative mean OR= 3.08 ## iteration 67 event rate = 0.64 exposure prevalence = 0.38 OR = 3.5 cumulative mean OR= 3.08 ## iteration 68 event rate = 0.66 exposure prevalence = 0.38 OR = 3.37 cumulative mean OR= 3.09 ## iteration 69 event rate = 0.66 exposure prevalence = 0.38 OR = 3.58 cumulative mean OR= 3.1 ## iteration 70 event rate = 0.67 exposure prevalence = 0.38 OR = 2.9 cumulative mean OR= 3.09 ## iteration 71 event rate = 0.66 exposure prevalence = 0.38 OR = 3.93 cumulative mean OR= 3.11 ## iteration 72 event rate = 0.65 exposure prevalence = 0.38 OR = 2.7 cumulative mean OR= 3.1 ## iteration 73 event rate = 0.66 exposure prevalence = 0.38 OR = 3.65 cumulative mean OR= 3.11 ## iteration 74 event rate = 0.65 exposure prevalence = 0.38 OR = 3.12 cumulative mean OR= 3.11 ## iteration 75 event rate = 0.64 exposure prevalence = 0.38 OR = 3.83 cumulative mean OR= 3.12 ## iteration 76 event rate = 0.63 exposure prevalence = 0.38 OR = 3.52 cumulative mean OR= 3.12 ## iteration 77 event rate = 0.66 exposure prevalence = 0.38 OR = 2.6 cumulative mean OR= 3.12 ## iteration 78 event rate = 0.64 exposure prevalence = 0.38 OR = 3.5 cumulative mean OR= 3.12 ## iteration 79 event rate = 0.65 exposure prevalence = 0.38 OR = 3.26 cumulative mean OR= 3.12 ## iteration 80 event rate = 0.65 exposure prevalence = 0.38 OR = 3.64 cumulative mean OR= 3.13 ## iteration 81 event rate = 0.64 exposure prevalence = 0.38 OR = 2.88 cumulative mean OR= 3.13 ## iteration 82 event rate = 0.65 exposure prevalence = 0.38 OR = 2.86 cumulative mean OR= 3.12 ## iteration 83 event rate = 0.65 exposure prevalence = 0.38 OR = 3.3 cumulative mean OR= 3.13 ## iteration 84 event rate = 0.65 exposure prevalence = 0.38 OR = 3.2 cumulative mean OR= 3.13 ## iteration 85 event rate = 0.65 exposure prevalence = 0.38 OR = 3.19 cumulative mean OR= 3.13 ## iteration 86 event rate = 0.65 exposure prevalence = 0.38 OR = 2.88 cumulative mean OR= 3.12 ## iteration 87 event rate = 0.64 exposure prevalence = 0.38 OR = 3.68 cumulative mean OR= 3.13 ## iteration 88 event rate = 0.64 exposure prevalence = 0.38 OR = 4.16 cumulative mean OR= 3.14 ## iteration 89 event rate = 0.64 exposure prevalence = 0.38 OR = 2.96 cumulative mean OR= 3.14 ## iteration 90 event rate = 0.65 exposure prevalence = 0.38 OR = 2.73 cumulative mean OR= 3.14 ## iteration 91 event rate = 0.66 exposure prevalence = 0.38 OR = NA cumulative mean OR= 3.14 ## iteration 92 event rate = 0.66 exposure prevalence = 0.38 OR = 3.65 cumulative mean OR= 3.14 ## iteration 93 event rate = 0.65 exposure prevalence = 0.38 OR = 3.08 cumulative mean OR= 3.14 ## iteration 94 event rate = 0.65 exposure prevalence = 0.38 OR = 3.44 cumulative mean OR= 3.14 ## iteration 95 event rate = 0.65 exposure prevalence = 0.38 OR = 3.43 cumulative mean OR= 3.15 ## iteration 96 event rate = 0.64 exposure prevalence = 0.38 OR = 2.98 cumulative mean OR= 3.15 ## iteration 97 event rate = 0.64 exposure prevalence = 0.38 OR = 2.81 cumulative mean OR= 3.14 ## iteration 98 event rate = 0.64 exposure prevalence = 0.38 OR = 3.27 cumulative mean OR= 3.14 ## iteration 99 event rate = 0.65 exposure prevalence = 0.38 OR = 3.23 cumulative mean OR= 3.14 ## iteration 100 event rate = 0.67 exposure prevalence = 0.38 OR = 3.48 cumulative mean OR= 3.15 summary(saveOR) ## Min. 1st Qu. Median Mean 3rd Qu. Max. NA&#39;s ## 2.535 2.902 3.121 3.148 3.335 4.165 3 hist(saveOR) "],["references.html", "References", " References "]]
